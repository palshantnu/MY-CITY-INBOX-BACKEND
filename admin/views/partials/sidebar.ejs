<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Sidenav - Admin Panel</title>
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body class="sb-nav-fixed">
  <div id="layoutSidenav">
    <div id="layoutSidenav_nav">
      <nav class="sb-sidenav accordion sb-sidenav-light" id="sidenavAccordion">
        <div class="sb-sidenav-menu">
          <div class="nav">
            <!-- Core -->
            <div class="sb-sidenav-menu-heading">Core</div>
            <a class="nav-link" href="/admin/dashboard">
              <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
              Dashboard
            </a>

            <% if (admin && admin.role === 'super_admin') { %>
              <!-- Super Admin ko full menu -->
              <div class="sb-sidenav-menu-heading">Entities</div>
              <a class="nav-link" href="/admin/users">
                <div class="sb-nav-link-icon"><i class="fas fa-users"></i></div>
                Users
              </a>
              <a class="nav-link" href="/admin/vendors">
                <div class="sb-nav-link-icon"><i class="fas fa-store"></i></div>
                Vendors
              </a>
              <a class="nav-link" href="/admin/sales">
                <div class="sb-nav-link-icon"><i class="fas fa-user-tie"></i></div>
                Sales Executives
              </a>
              <!-- Only for Super Admin -->
              <a class="nav-link" href="/admin/subadmins">
                <div class="sb-nav-link-icon"><i class="fas fa-user-shield"></i></div>
                Manage Sub Admins
              </a>
              <div class="sb-sidenav-menu-heading">Management</div>
              <a class="nav-link" href="/admin/sliders">
                <div class="sb-nav-link-icon"><i class="fas fa-images"></i></div>
                Manage Sliders
              </a>
              <a class="nav-link" href="/admin/categories">
                <div class="sb-nav-link-icon"><i class="fas fa-list"></i></div>
                Manage Categories
              </a>
              <a class="nav-link" href="/admin/subcategories">
                <div class="sb-nav-link-icon"><i class="fas fa-layer-group"></i></div>
                Manage Subcategories
              </a>
              <a class="nav-link" href="/admin/notifications">
                <div class="sb-nav-link-icon"><i class="fas fa-bell"></i></div>
                Send Notification
              </a>

              <!-- New Pages Section -->
              <div class="sb-sidenav-menu-heading">Pages</div>
              <a class="nav-link" href="/admin/pages/about">
                <div class="sb-nav-link-icon"><i class="fas fa-info-circle"></i></div>
                About Us
              </a>
              <a class="nav-link" href="/admin/pages/terms">
                <div class="sb-nav-link-icon"><i class="fas fa-file-contract"></i></div>
                Terms & Conditions
              </a>
              <a class="nav-link" href="/admin/pages/privacy">
                <div class="sb-nav-link-icon"><i class="fas fa-user-secret"></i></div>
                Privacy Policy
              </a>
              <a class="nav-link" href="/admin/feedback">
                <div class="sb-nav-link-icon"><i class="fas fa-comments"></i></div>
                Feedbacks
              </a>
            <% } else if (admin && admin.role === 'sub_admin') { %>
              <!-- Sub Admin ke liye sirf allotted_section -->
              <div class="sb-sidenav-menu-heading">Assigned</div>
              <%
                const sections = (admin.allotted_section || '')
                  .split(',')
                  .map(s => s.trim().toLowerCase())
                  .filter(s => s.length > 0);
                const hasAll = sections.includes('all');
              %>
              <% if (hasAll || sections.includes('users')) { %>
                <a class="nav-link" href="/admin/users">
                  <div class="sb-nav-link-icon"><i class="fas fa-users"></i></div>
                  Users
                </a>
              <% } %>
              <% if (hasAll || sections.includes('vendors')) { %>
                <a class="nav-link" href="/admin/vendors">
                  <div class="sb-nav-link-icon"><i class="fas fa-store"></i></div>
                  Vendors
                </a>
              <% } %>
              <% if (hasAll || sections.includes('sales')) { %>
                <a class="nav-link" href="/admin/sales">
                  <div class="sb-nav-link-icon"><i class="fas fa-user-tie"></i></div>
                  Sales Executives
                </a>
              <% } %>
              <% if (hasAll || sections.includes('categories')) { %>
                <a class="nav-link" href="/admin/categories">
                  <div class="sb-nav-link-icon"><i class="fas fa-list"></i></div>
                  Categories
                </a>
              <% } %>
              <% if (hasAll || sections.includes('sliders')) { %>
                <a class="nav-link" href="/admin/sliders">
                  <div class="sb-nav-link-icon"><i class="fas fa-images"></i></div>
                  Sliders
                </a>
              <% } %>
              <% if (hasAll || sections.includes('subcategories')) { %>
                <a class="nav-link" href="/admin/subcategories">
                  <div class="sb-nav-link-icon"><i class="fas fa-layer-group"></i></div>
                  Subcategories
                </a>
              <% } %>
              <% if (hasAll || sections.includes('notifications')) { %>
                <a class="nav-link" href="/admin/notifications">
                  <div class="sb-nav-link-icon"><i class="fas fa-bell"></i></div>
                  Notifications
                </a>
              <% } %>
              <% if (hasAll || sections.includes('feedback')) { %>
                <a class="nav-link" href="/admin/feedback">
                  <div class="sb-nav-link-icon"><i class="fas fa-comments"></i></div>
                  Feedbacks
                </a>
              <% } %>
              
              <!-- New Pages Section for Sub Admin -->
              <% if (hasAll || sections.includes('pages')) { %>
                <div class="sb-sidenav-menu-heading">Pages</div>
                <a class="nav-link" href="/admin/pages/about">
                  <div class="sb-nav-link-icon"><i class="fas fa-info-circle"></i></div>
                  About Us
                </a>
                <a class="nav-link" href="/admin/pages/terms">
                  <div class="sb-nav-link-icon"><i class="fas fa-file-contract"></i></div>
                  Terms & Conditions
                </a>
                <a class="nav-link" href="/admin/pages/privacy">
                  <div class="sb-nav-link-icon"><i class="fas fa-user-secret"></i></div>
                  Privacy Policy
                </a>
                
              <% } %>
            <% } %>
          </div>
        </div>

        <div class="sb-sidenav-footer">
          <div class="small">Logged in as:</div>
          <%= admin && admin.name ? admin.name : 'Guest' %>
        </div>
      </nav>
    </div>
  </div>
</body>
</html>
